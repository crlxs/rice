# Ansible playbook to install my custom Linux Desktop environment + dotfiles.

- hosts: localhost
  become: true
  vars:
    suckless_dep: # Packages required to build dwm/dmenu/st and packages that I will only use with the graphical environment (feh, chromium, etc).
      - xorg 
      - xserver-xorg
      - dbus-x11
      - build-essential
      - libx11-dev
      - libxft-dev
      - libxinerama-dev
      - feh
      - xwallpaper
      - compton
      - gimp
    core: # Packages common to all environments, regardless if they are graphical or not (zsh, git, neovim dependencies [ripgrep, fd-find], etc).
      - curl
      - ripgrep
      - fd-find
      - unzip  
      - git
      - zsh
      - fzf #Fuzzy finder for shell
      - fonts-noto-color-emoji
      - net-tools
      - tcpdump
    homedirs: # All directories under ~/ to be created
      - "{{ user_home }}"/.dotfiles
      - "{{ user_home }}"/.config
      - "{{ user_home }}"/.cache
      - "{{ user_home }}"/.local/src
      - "{{ user_home }}"/.local/share
      - "{{ user_home }}"/.local/bin


  pre_tasks: # Tasks common to all setup options (Full, core+git or just core).
    - name: Determine ~/ of the sudo user or current user
      set_fact:
        user_home: "{{ lookup('env', 'HOME') }}"
      when: ansible_env.SUDO_USER is not defined

    - name: Print the determined home directory
      debug:
        msg: "The home directory is {{ user_home }}"
    # Do with include aswell

  tasks: # Tasks per setup options, split through tags.
    - include: tasks/common.yaml
    - include: tasks/gitssh.yaml
    - include: tasks/suckless.yaml
    # Includes seems way cleaner to manage instead of blocks of tasks.
